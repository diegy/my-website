<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PromptCraft - AIæç¤ºè¯ç”Ÿæˆå™¨ | æŠŠæ¨¡ç³Šæƒ³æ³•å˜æˆAIèƒ½æ‡‚çš„æŒ‡ä»¤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-light: #818cf8;
            --primary-dark: #4f46e5;
            --accent: #06b6d4;
            --accent-light: #22d3ee;
            --success: #22c55e;
            --warning: #f59e0b;
            --dark: #0f172a;
            --gray-900: #1e293b;
            --gray-700: #334155;
            --gray-500: #64748b;
            --gray-300: #cbd5e1;
            --gray-100: #f1f5f9;
            --white: #ffffff;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #312e81 100%);
            min-height: 100vh;
            color: var(--gray-100);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            text-align: center;
            padding: 40px 20px;
        }

        .logo {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .logo-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(90deg, var(--primary-light) 0%, var(--accent-light) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        header h1 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 16px;
            line-height: 1.2;
        }

        header h1 .highlight {
            color: var(--accent-light);
        }

        header p {
            font-size: 1.125rem;
            color: var(--gray-300);
            max-width: 600px;
            margin: 0 auto;
        }

        /* æ ¸å¿ƒæ´å¯Ÿå±•ç¤º */
        .insight-banner {
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 16px;
            padding: 20px 24px;
            margin: 30px auto;
            max-width: 800px;
            display: flex;
            align-items: flex-start;
            gap: 16px;
        }

        .insight-icon {
            width: 40px;
            height: 40px;
            background: var(--primary);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 20px;
        }

        .insight-content h3 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 6px;
            color: var(--primary-light);
        }

        .insight-content p {
            font-size: 0.875rem;
            color: var(--gray-300);
            line-height: 1.6;
        }

        /* è¿›åº¦å¯¼èˆª - ä¸‰æ­¥é—­ç¯ï¼šæ¨¡ç³Šéœ€æ±‚ â†’ æ„å›¾æ¾„æ¸… â†’ ç»“æ„åŒ–æç¤ºè¯ */
        .progress-nav {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 40px 0;
            gap: 0;
        }

        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            position: relative;
        }

        .progress-step .step-num {
            width: 52px;
            height: 52px;
            border-radius: 50%;
            background: rgba(255,255,255,0.05);
            color: var(--gray-500);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.25rem;
            border: 2px solid rgba(255,255,255,0.1);
            transition: all 0.3s ease;
        }

        .progress-step .step-label {
            color: var(--gray-500);
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.3s ease;
            text-align: center;
            max-width: 100px;
        }

        .progress-step.active .step-num {
            background: var(--primary);
            border-color: var(--primary-light);
            box-shadow: 0 0 30px rgba(99, 102, 241, 0.4);
            color: white;
        }

        .progress-step.active .step-label {
            color: var(--primary-light);
            font-weight: 600;
        }

        .progress-step.completed .step-num {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .progress-connector {
            width: 100px;
            height: 2px;
            background: rgba(255,255,255,0.1);
            margin: 0 15px;
            position: relative;
            top: -14px;
        }

        .progress-connector.active {
            background: linear-gradient(90deg, var(--success) 0%, var(--primary) 100%);
        }

        /* ä¸»å·¥ä½œåŒº */
        .workspace {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            border: 1px solid rgba(255,255,255,0.08);
            overflow: hidden;
        }

        /* æ­¥éª¤1: è¾“å…¥æ¨¡ç³Šéœ€æ±‚ */
        .step-panel {
            padding: 40px;
            display: none;
        }

        .step-panel.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .step-header h2 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .step-header p {
            color: var(--gray-500);
            font-size: 0.9375rem;
        }

        /* è¾“å…¥åŒºåŸŸ */
        .input-section {
            max-width: 700px;
            margin: 0 auto;
        }

        .input-hint {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 16px;
            justify-content: center;
        }

        .hint-tag {
            background: rgba(99, 102, 241, 0.15);
            color: var(--primary-light);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8125rem;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid rgba(99, 102, 241, 0.2);
        }

        .hint-tag:hover {
            background: rgba(99, 102, 241, 0.25);
            transform: translateY(-1px);
        }

        .main-input {
            width: 100%;
            min-height: 140px;
            background: rgba(255,255,255,0.03);
            border: 2px solid rgba(255,255,255,0.08);
            border-radius: 16px;
            padding: 20px;
            color: var(--gray-100);
            font-size: 1rem;
            resize: vertical;
            transition: all 0.3s;
        }

        .main-input::placeholder {
            color: var(--gray-500);
        }

        .main-input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255,255,255,0.05);
        }

        .input-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 16px;
            flex-wrap: wrap;
            gap: 12px;
        }

        .input-tips {
            display: flex;
            gap: 16px;
            font-size: 0.8125rem;
            color: var(--gray-500);
        }

        .input-tips span {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* æŒ‰é’® */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 14px 28px;
            border-radius: 12px;
            font-size: 0.9375rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            box-shadow: 0 4px 20px rgba(99, 102, 241, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(99, 102, 241, 0.4);
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: rgba(255,255,255,0.05);
            color: var(--gray-300);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.1);
        }

        /* æ­¥éª¤2: æ„å›¾æ¾„æ¸… - äº¤äº’å¼é—®è¯Š */
        .clarification-chat {
            max-width: 800px;
            margin: 0 auto;
        }

        .chat-messages {
            min-height: 300px;
            max-height: 500px;
            overflow-y: auto;
            padding: 20px;
            background: rgba(0,0,0,0.2);
            border-radius: 16px;
            margin-bottom: 20px;
        }

        .message {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }

        .message.ai .message-avatar {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
        }

        .message.user .message-avatar {
            background: var(--gray-700);
        }

        .message-content {
            flex: 1;
            padding: 16px 20px;
            border-radius: 16px;
            font-size: 0.9375rem;
            line-height: 1.7;
        }

        .message.ai .message-content {
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid rgba(99, 102, 241, 0.15);
        }

        .message.user .message-content {
            background: rgba(255,255,255,0.05);
        }

        .message-content strong {
            color: var(--accent-light);
            font-weight: 600;
        }

        /* å¿«é€Ÿé€‰é¡¹ */
        .quick-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 12px;
        }

        .quick-option {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            color: var(--gray-300);
            padding: 10px 18px;
            border-radius: 10px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quick-option:hover {
            background: rgba(99, 102, 241, 0.2);
            border-color: var(--primary);
            color: var(--primary-light);
        }

        /* ç”¨æˆ·è¾“å…¥åŒº */
        .user-input-area {
            display: flex;
            gap: 12px;
        }

        .user-input-area input {
            flex: 1;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 14px 18px;
            color: var(--gray-100);
            font-size: 0.9375rem;
        }

        .user-input-area input::placeholder {
            color: var(--gray-500);
        }

        .user-input-area input:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* æ­¥éª¤3: ç»“æ„åŒ–æç¤ºè¯è¾“å‡º */
        .output-section {
            max-width: 900px;
            margin: 0 auto;
        }

        .prompt-card {
            background: rgba(0,0,0,0.3);
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.08);
            overflow: hidden;
        }

        .prompt-header {
            background: rgba(99, 102, 241, 0.1);
            padding: 20px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        .prompt-title {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .prompt-title-icon {
            width: 44px;
            height: 44px;
            background: var(--primary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
        }

        .prompt-title-text h3 {
            font-size: 1.125rem;
            font-weight: 600;
        }

        .prompt-title-text p {
            font-size: 0.8125rem;
            color: var(--gray-500);
        }

        .prompt-actions {
            display: flex;
            gap: 10px;
        }

        .btn-sm {
            padding: 10px 18px;
            font-size: 0.875rem;
            border-radius: 10px;
        }

        /* æç¤ºè¯ç»“æ„å±•ç¤º */
        .prompt-body {
            padding: 24px;
        }

        .prompt-structure {
            display: grid;
            gap: 16px;
        }

        .structure-block {
            background: rgba(255,255,255,0.03);
            border-radius: 14px;
            padding: 20px;
            border-left: 4px solid;
        }

        .structure-block.role {
            border-color: var(--primary);
        }

        .structure-block.task {
            border-color: var(--accent);
        }

        .structure-block.context {
            border-color: var(--warning);
        }

        .structure-block.constraints {
            border-color: var(--success);
        }

        .structure-block.output {
            border-color: #ec4899;
        }

        .block-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
        }

        .block-icon {
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .role .block-icon { background: rgba(99, 102, 241, 0.2); }
        .task .block-icon { background: rgba(6, 182, 212, 0.2); }
        .context .block-icon { background: rgba(245, 158, 11, 0.2); }
        .constraints .block-icon { background: rgba(34, 197, 94, 0.2); }
        .output .block-icon { background: rgba(236, 72, 153, 0.2); }

        .block-label {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--gray-500);
        }

        .block-content {
            color: var(--gray-100);
            font-size: 0.9375rem;
            line-height: 1.7;
        }

        .block-content code {
            background: rgba(0,0,0,0.3);
            padding: 2px 8px;
            border-radius: 6px;
            font-size: 0.875rem;
            color: var(--accent-light);
        }

        /* å®Œæ•´æç¤ºè¯é¢„è§ˆ */
        .full-prompt {
            margin-top: 20px;
            padding: 20px;
            background: rgba(0,0,0,0.4);
            border-radius: 14px;
        }

        .full-prompt-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .full-prompt-header h4 {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--gray-500);
        }

        .full-prompt-content {
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 0.875rem;
            line-height: 1.8;
            color: var(--gray-300);
            white-space: pre-wrap;
            word-break: break-word;
        }

        /* ä½¿ç”¨æŒ‡å— */
        .usage-guide {
            margin-top: 24px;
            padding: 20px;
            background: rgba(34, 197, 94, 0.05);
            border: 1px solid rgba(34, 197, 94, 0.15);
            border-radius: 14px;
        }

        .usage-guide h4 {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--success);
            margin-bottom: 12px;
        }

        .usage-guide ol {
            padding-left: 20px;
            color: var(--gray-300);
            font-size: 0.875rem;
            line-height: 1.8;
        }

        .usage-guide li {
            margin-bottom: 6px;
        }

        /* åº•éƒ¨å¯¼èˆª */
        .step-footer {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid rgba(255,255,255,0.06);
        }

        /* å“åº”å¼ */
        @media (max-width: 768px) {
            header h1 {
                font-size: 1.75rem;
            }

            .progress-connector {
                width: 40px;
            }

            .step-panel {
                padding: 24px;
            }

            .progress-step .step-label {
                font-size: 0.75rem;
                max-width: 70px;
            }
        }

        /* åŠ è½½åŠ¨ç”» */
        .typing-indicator {
            display: flex;
            gap: 6px;
            padding: 16px 20px;
        }

        .typing-indicator span {
            width: 8px;
            height: 8px;
            background: var(--primary-light);
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
        .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        /* æˆåŠŸæç¤º */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--success);
            color: white;
            padding: 14px 28px;
            border-radius: 12px;
            font-weight: 500;
            opacity: 0;
            transition: all 0.3s;
            z-index: 1000;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <div class="logo-icon">ğŸ¯</div>
                <div class="logo-text">PromptCraft</div>
            </div>
            <h1>æŠŠ<span class="highlight">æ¨¡ç³Šæƒ³æ³•</span>å˜æˆAIèƒ½æ‡‚çš„æŒ‡ä»¤</h1>
            <p>æ— éœ€å­¦ä¹ æç¤ºè¯å·¥ç¨‹ï¼Œé€šè¿‡ç®€å•å¯¹è¯è®©AIç†è§£ä½ çš„çœŸå®éœ€æ±‚</p>
        </header>

        <!-- æ ¸å¿ƒæ´å¯Ÿ -->
        <div class="insight-banner">
            <div class="insight-icon">ğŸ’¡</div>
            <div class="insight-content">
                <h3>æ ¸å¿ƒæ´å¯Ÿï¼šæç¤ºè¯å·¥ç¨‹çš„æœ¬è´¨æ˜¯"æ„å›¾ç²¾ç¡®ç¼–ç "</h3>
                <p>äººç±»è¡¨è¾¾å……æ»¡éšå«å‡è®¾å’Œä¸Šä¸‹æ–‡ï¼Œè€ŒAIéœ€è¦æ˜ç¡®çš„çº¦æŸæ¡ä»¶ã€‚æˆ‘ä»¬é€šè¿‡äº¤äº’å¼é—®è¯Šï¼Œå¸®ä½ é€å±‚æ‹†è§£éœ€æ±‚ï¼Œå°†æ¨¡ç³Šæƒ³æ³•ç¿»è¯‘ä¸ºAIå¯æ‰§è¡Œçš„ç»“æ„åŒ–æŒ‡ä»¤ã€‚</p>
            </div>
        </div>

        <!-- ä¸‰æ­¥è¿›åº¦å¯¼èˆª -->
        <nav class="progress-nav">
            <div class="progress-step active" data-step="1">
                <div class="step-num">1</div>
                <div class="step-label">æè¿°éœ€æ±‚</div>
            </div>
            <div class="progress-connector"></div>
            <div class="progress-step" data-step="2">
                <div class="step-num">2</div>
                <div class="step-label">æ¾„æ¸…æ„å›¾</div>
            </div>
            <div class="progress-connector"></div>
            <div class="progress-step" data-step="3">
                <div class="step-num">3</div>
                <div class="step-label">ç”Ÿæˆæç¤ºè¯</div>
            </div>
        </nav>

        <!-- ä¸»å·¥ä½œåŒº -->
        <main class="workspace">
            <!-- æ­¥éª¤1: è¾“å…¥æ¨¡ç³Šéœ€æ±‚ -->
            <section class="step-panel active" id="step1">
                <div class="step-header">
                    <h2>ğŸ“ ç”¨ä¸€å¥è¯æè¿°ä½ æƒ³è®©AIåšä»€ä¹ˆ</h2>
                    <p>ä¸ç”¨æ‹…å¿ƒè¡¨è¾¾æ˜¯å¦æ¸…æ™°ï¼Œæˆ‘ä»¬ä¼šå¸®ä½ å®Œå–„</p>
                </div>

                <div class="input-section">
                    <!-- å¿«æ·æç¤º -->
                    <div class="input-hint">
                        <span class="hint-tag" onclick="fillExample('å¸®æˆ‘å†™ä¸€ä»½å‘¨æŠ¥ï¼Œæ€»ç»“æœ¬å‘¨å·¥ä½œè¿›å±•')">ğŸ“Š å†™å‘¨æŠ¥</span>
                        <span class="hint-tag" onclick="fillExample('åšä¸€ä¸ªèƒ½è®¡ç®—æˆ¿è´·çš„Excelè¡¨æ ¼')">ğŸ“± åšExcelå·¥å…·</span>
                        <span class="hint-tag" onclick="fillExample('ç»™æˆ‘ä¸€äº›é€‚åˆç¨‹åºå‘˜çš„å‰¯ä¸šå»ºè®®')">ğŸ’¼ èŒä¸šè§„åˆ’</span>
                        <span class="hint-tag" onclick="fillExample('å¸®æˆ‘åˆ†æè¿™ä»½é”€å”®æ•°æ®ï¼Œæ‰¾å‡ºå¢é•¿æœºä¼š')">ğŸ“ˆ æ•°æ®åˆ†æ</span>
                        <span class="hint-tag" onclick="fillExample('å†™ä¸€ä¸ªå°çº¢ä¹¦æ–‡æ¡ˆï¼Œæ¨å¹¿æˆ‘çš„æ‰‹å·¥é¥°å“')">âœï¸ å†…å®¹åˆ›ä½œ</span>
                    </div>

                    <!-- ä¸»è¾“å…¥æ¡† -->
                    <textarea 
                        class="main-input" 
                        id="userIdea"
                        placeholder="ä¾‹å¦‚ï¼šæˆ‘æƒ³è®©AIå¸®æˆ‘å†™ä¸€å°é‚®ä»¶ï¼Œå‘Šè¯‰å®¢æˆ·é¡¹ç›®å»¶æœŸäº†ï¼Œä½†ä¸çŸ¥é“æ€ä¹ˆå¼€å£..."
                    ></textarea>

                    <div class="input-meta">
                        <div class="input-tips">
                            <span>ğŸ’¡ è¶Šå…·ä½“è¶Šå¥½ï¼Œä½†ä¸ç”¨å®Œç¾</span>
                            <span>ğŸ¯ æè¿°ç›®æ ‡è€Œéæ–¹æ³•</span>
                        </div>
                        <button class="btn btn-primary" onclick="startClarification()">
                            å¼€å§‹æ¾„æ¸…æ„å›¾ â†’
                        </button>
                    </div>
                </div>
            </section>

            <!-- æ­¥éª¤2: äº¤äº’å¼æ„å›¾æ¾„æ¸… -->
            <section class="step-panel" id="step2">
                <div class="step-header">
                    <h2>ğŸ” é€šè¿‡å¯¹è¯æ¾„æ¸…ä½ çš„çœŸå®éœ€æ±‚</h2>
                    <p>å›ç­”å‡ ä¸ªç®€å•é—®é¢˜ï¼Œè®©AIå‡†ç¡®ç†è§£ä½ çš„æ„å›¾</p>
                </div>

                <div class="clarification-chat">
                    <div class="chat-messages" id="chatMessages">
                        <!-- åŠ¨æ€ç”Ÿæˆå¯¹è¯å†…å®¹ -->
                    </div>

                    <div class="user-input-area" id="userInputArea">
                        <input 
                            type="text" 
                            id="clarificationInput"
                            placeholder="è¾“å…¥ä½ çš„å›ç­”..."
                            onkeypress="handleEnter(event)"
                        >
                        <button class="btn btn-primary" onclick="submitAnswer()">
                            å‘é€
                        </button>
                    </div>
                </div>

                <div class="step-footer">
                    <button class="btn btn-secondary" onclick="goBack(1)">â† ä¿®æ”¹éœ€æ±‚</button>
                    <button class="btn btn-primary" id="generateBtn" onclick="generatePrompt()" disabled>
                        ç”Ÿæˆæç¤ºè¯ âœ¨
                    </button>
                </div>
            </section>

            <!-- æ­¥éª¤3: ç»“æ„åŒ–æç¤ºè¯è¾“å‡º -->
            <section class="step-panel" id="step3">
                <div class="step-header">
                    <h2>âœ… ä½ çš„ä¸“å±æç¤ºè¯å·²ç”Ÿæˆ</h2>
                    <p>åŸºäºä½ çš„éœ€æ±‚æ‹†è§£ï¼Œå¯ç›´æ¥å¤åˆ¶ä½¿ç”¨</p>
                </div>

                <div class="output-section">
                    <div class="prompt-card">
                        <div class="prompt-header">
                            <div class="prompt-title">
                                <div class="prompt-title-icon">ğŸ¯</div>
                                <div class="prompt-title-text">
                                    <h3 id="promptName">é¡¹ç›®å»¶æœŸé€šçŸ¥é‚®ä»¶ç”Ÿæˆå™¨</h3>
                                    <p>é’ˆå¯¹ä½ çš„å…·ä½“åœºæ™¯ä¼˜åŒ–</p>
                                </div>
                            </div>
                            <div class="prompt-actions">
                                <button class="btn btn-secondary btn-sm" onclick="copyFullPrompt()">
                                    ğŸ“‹ å¤åˆ¶å®Œæ•´ç‰ˆ
                                </button>
                                <button class="btn btn-primary btn-sm" onclick="copyForAI()">
                                    ğŸ¤– å»å¯¹è¯ä½¿ç”¨
                                </button>
                            </div>
                        </div>

                        <div class="prompt-body">
                            <!-- ç»“æ„åŒ–å±•ç¤º -->
                            <div class="prompt-structure" id="promptStructure">
                                <!-- åŠ¨æ€ç”Ÿæˆ -->
                            </div>

                            <!-- å®Œæ•´é¢„è§ˆ -->
                            <div class="full-prompt">
                                <div class="full-prompt-header">
                                    <h4>å®Œæ•´æç¤ºè¯</h4>
                                    <span style="color: var(--gray-500); font-size: 0.8125rem;">å¯ç›´æ¥å¤åˆ¶åˆ°ä»»ä½•AIå¯¹è¯</span>
                                </div>
                                <pre class="full-prompt-content" id="fullPromptContent"></pre>
                            </div>

                            <!-- ä½¿ç”¨æŒ‡å— -->
                            <div class="usage-guide">
                                <h4>ğŸ“– ä½¿ç”¨å»ºè®®</h4>
                                <ol id="usageTips">
                                    <!-- åŠ¨æ€ç”Ÿæˆ -->
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="step-footer">
                    <button class="btn btn-secondary" onclick="goBack(2)">â† é‡æ–°æ¾„æ¸…</button>
                    <button class="btn btn-primary" onclick="startOver()">
                        ğŸ”„ å¼€å§‹æ–°çš„éœ€æ±‚
                    </button>
                </div>
            </section>
        </main>
    </div>

    <!-- Toastæç¤º -->
    <div class="toast" id="toast">å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼</div>

    <script>
        // ==================== çŠ¶æ€ç®¡ç† ====================
        const state = {
            currentStep: 1,
            userIdea: '',
            clarificationAnswers: [],
            currentQuestionIndex: 0,
            generatedPrompt: null
        };

        // ==================== æ„å›¾æ¾„æ¸…å¼•æ“ ====================
        // åŸºäºç”¨æˆ·åˆå§‹è¾“å…¥ï¼ŒåŠ¨æ€ç”Ÿæˆæ¾„æ¸…é—®é¢˜
        const clarificationEngine = {
            // åˆ†æç”¨æˆ·è¾“å…¥ï¼Œç¡®å®šåœºæ™¯ç±»å‹
            analyzeIntent: (input) => {
                const lower = input.toLowerCase();
                if (lower.includes('é‚®ä»¶') || lower.includes('å†™') && lower.includes('ä¿¡')) return 'writing';
                if (lower.includes('excel') || lower.includes('è¡¨æ ¼') || lower.includes('è®¡ç®—')) return 'tool';
                if (lower.includes('åˆ†æ') || lower.includes('æ•°æ®')) return 'analysis';
                if (lower.includes('å»ºè®®') || lower.includes('è§„åˆ’') || lower.includes('é€‰æ‹©')) return 'advisory';
                if (lower.includes('æ–‡æ¡ˆ') || lower.includes('å°çº¢ä¹¦') || lower.includes('æ¨å¹¿')) return 'marketing';
                return 'general';
            },

            // æ ¹æ®åœºæ™¯ç”Ÿæˆé—®é¢˜åºåˆ—
            generateQuestions: (input, type) => {
                const baseQuestions = {
                    writing: [
                        { q: 'è¿™å°é‚®ä»¶çš„æ”¶ä»¶äººæ˜¯è°ï¼Ÿï¼ˆä¸Šçº§/å®¢æˆ·/åŒäº‹ï¼‰', key: 'audience', options: ['ä¸Šçº§é¢†å¯¼', 'å®¢æˆ·', 'åŒäº‹', 'åˆä½œä¼™ä¼´'] },
                        { q: 'ä½ å¸Œæœ›ä¼ è¾¾çš„æ ¸å¿ƒä¿¡æ¯æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆä¸€å¥è¯æ¦‚æ‹¬ï¼‰', key: 'coreMessage' },
                        { q: 'æœŸæœ›çš„è¯­æ°”é£æ ¼æ˜¯ï¼Ÿ', key: 'tone', options: ['æ­£å¼ä¸“ä¸š', 'è¯šæ³é“æ­‰', 'ç®€æ´ç›´æ¥', 'å§”å©‰ç¼“å†²'] },
                        { q: 'æœ‰ä»€ä¹ˆå¿…é¡»æåŠçš„å…³é”®ä¿¡æ¯ç‚¹ï¼Ÿ', key: 'keyPoints' }
                    ],
                    tool: [
                        { q: 'è¿™ä¸ªå·¥å…·çš„ä¸»è¦ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ', key: 'scenario' },
                        { q: 'ç›®æ ‡ç”¨æˆ·æ˜¯è°ï¼Ÿï¼ˆä½ è‡ªå·±/å›¢é˜Ÿ/å®¢æˆ·ï¼‰', key: 'user', options: ['ä¸ªäººä½¿ç”¨', 'å›¢é˜Ÿåä½œ', 'ç»™å®¢æˆ·å±•ç¤º'] },
                        { q: 'éœ€è¦å“ªäº›æ ¸å¿ƒåŠŸèƒ½ï¼Ÿ', key: 'features' },
                        { q: 'å¯¹ç•Œé¢å¤æ‚åº¦æœ‰ä»€ä¹ˆè¦æ±‚ï¼Ÿ', key: 'complexity', options: ['æç®€ï¼Œä¸€çœ¼çœ‹æ‡‚', 'åŠŸèƒ½å®Œæ•´ï¼Œæ„¿æ„å­¦ä¹ '] }
                    ],
                    analysis: [
                        { q: 'æ•°æ®æ¥æºå’Œæ ¼å¼æ˜¯ä»€ä¹ˆï¼Ÿ', key: 'dataSource' },
                        { q: 'åˆ†æçš„æ ¸å¿ƒç›®çš„æ˜¯ï¼Ÿ', key: 'purpose', options: ['å‘ç°å¢é•¿æœºä¼š', 'æ‰¾å‡ºé—®é¢˜åŸå› ', 'é¢„æµ‹æœªæ¥è¶‹åŠ¿', 'åˆ¶ä½œæ±‡æŠ¥ææ–™'] },
                        { q: 'ç›®æ ‡å—ä¼—æ˜¯è°ï¼Ÿï¼ˆä½ è‡ªå·±/éœ€è¦å‘è°æ±‡æŠ¥ï¼‰', key: 'audience' },
                        { q: 'éœ€è¦è¾“å‡ºä»€ä¹ˆå½¢å¼çš„ç»“è®ºï¼Ÿ', key: 'output', options: ['è¯¦ç»†æŠ¥å‘Š', 'å…³é”®æ´å¯Ÿæ¸…å•', 'å¯è§†åŒ–å›¾è¡¨å»ºè®®', 'æ‰§è¡Œè¡ŒåŠ¨è®¡åˆ’'] }
                    ],
                    advisory: [
                        { q: 'ä½ å½“å‰çš„å…·ä½“æƒ…å†µæˆ–èƒŒæ™¯æ˜¯ï¼Ÿ', key: 'background' },
                        { q: 'åšè¿™ä¸ªå†³ç­–çš„ä¸»è¦çº¦æŸæ¡ä»¶æœ‰å“ªäº›ï¼Ÿ', key: 'constraints' },
                        { q: 'ä½ å€¾å‘çš„æ–¹æ¡ˆæ–¹å‘æ˜¯ï¼Ÿ', key: 'preference', options: ['ä¿å®ˆç¨³å¥', 'æ¿€è¿›çªç ´', 'è¿˜æ²¡æƒ³æ³•ï¼Œæƒ³å…¨é¢äº†è§£ä¸€ä¸‹'] },
                        { q: 'æœŸæœ›çš„è¾“å‡ºè¯¦ç»†ç¨‹åº¦ï¼Ÿ', key: 'detail', options: ['å¿«é€Ÿæ¦‚è§ˆï¼ˆ3-5æ¡ï¼‰', 'æ·±åº¦åˆ†æï¼ˆå¸¦æ‰§è¡Œæ­¥éª¤ï¼‰'] }
                    ],
                    marketing: [
                        { q: 'äº§å“/æœåŠ¡çš„æ ¸å¿ƒå–ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ', key: 'sellingPoint' },
                        { q: 'ç›®æ ‡å—ä¼—ç”»åƒï¼Ÿ', key: 'targetAudience' },
                        { q: 'å¸Œæœ›è¥é€ çš„å“ç‰Œè°ƒæ€§æ˜¯ï¼Ÿ', key: 'brandTone', options: ['é«˜ç«¯ç²¾è‡´', 'äº²æ°‘å®ç”¨', 'å¹´è½»æ½®æµ', 'ä¸“ä¸šå¯ä¿¡'] },
                        { q: 'éœ€è¦åŒ…å«ä»€ä¹ˆè¡ŒåŠ¨å·å¬ï¼Ÿ', key: 'cta' }
                    ],
                    general: [
                        { q: 'è¿™ä¸ªä»»åŠ¡çš„æœ€ç»ˆç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ', key: 'goal' },
                        { q: 'æœ‰ä»€ä¹ˆå¿…é¡»éµå®ˆçš„é™åˆ¶æ¡ä»¶ï¼Ÿ', key: 'constraints' },
                        { q: 'æœŸæœ›çš„è¾“å‡ºæ ¼å¼æ˜¯ï¼Ÿ', key: 'format', options: ['è¯¦ç»†è¯´æ˜', 'æ­¥éª¤æ¸…å•', 'å¯¹æ¯”è¡¨æ ¼', 'ç›´æ¥å¯ç”¨çš„å†…å®¹'] },
                        { q: 'è¿˜æœ‰ä»€ä¹ˆé‡è¦çš„èƒŒæ™¯ä¿¡æ¯æˆ‘éœ€è¦çŸ¥é“ï¼Ÿ', key: 'context' }
                    ]
                };

                return baseQuestions[type] || baseQuestions.general;
            }
        };

        // ==================== æç¤ºè¯ç”Ÿæˆå™¨ ====================
        const promptGenerator = {
            // æ„å»ºç»“æ„åŒ–æç¤ºè¯
            build: (idea, answers, type) => {
                const answerMap = {};
                answers.forEach(a => answerMap[a.key] = a.value);

                const structures = {
                    writing: {
                        role: `ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„å•†åŠ¡æ²Ÿé€šé¡¾é—®ï¼Œæ“…é•¿æ ¹æ®åœºæ™¯å’Œå—ä¼—è°ƒæ•´æ²Ÿé€šç­–ç•¥ã€‚`,
                        task: `è¯·å¸®æˆ‘æ’°å†™ä¸€å°é‚®ä»¶ï¼Œä¸»é¢˜æ˜¯ï¼š${idea}ã€‚æ ¸å¿ƒä¿¡æ¯ï¼š${answerMap.coreMessage || 'è§ä¸Šä¸‹æ–‡'}`,
                        context: `æ”¶ä»¶äººï¼š${answerMap.audience || 'æœªæŒ‡å®š'}ï¼›è¯­æ°”è¦æ±‚ï¼š${answerMap.tone || 'æ ¹æ®åœºæ™¯åˆ¤æ–­'}ï¼›å¿…é¡»åŒ…å«çš„ä¿¡æ¯ç‚¹ï¼š${answerMap.keyPoints || 'æ— ç‰¹æ®Šè¦æ±‚'}`,
                        constraints: `1. é‚®ä»¶ç»“æ„å®Œæ•´ï¼ˆä¸»é¢˜è¡Œ+ç§°å‘¼+æ­£æ–‡+ç»“å°¾ï¼‰ï¼›2. è¯­æ°”ç¬¦åˆåŒæ–¹å…³ç³»ï¼›3. ä¿¡æ¯æ¸…æ™°æ— æ­§ä¹‰ï¼›4. æä¾›2-3ä¸ªå¤‡é€‰ä¸»é¢˜è¡Œ`,
                        output: `è¾“å‡ºå®Œæ•´é‚®ä»¶æ­£æ–‡ï¼Œå¹¶ç®€è¦è¯´æ˜é€‰æ‹©è¯¥è¯­æ°”ç­–ç•¥çš„ç†ç”±`
                    },
                    tool: {
                        role: `ä½ æ˜¯ä¸€ä½Excel/Google Sheetsä¸“å®¶ï¼Œæ“…é•¿å°†ä¸šåŠ¡éœ€æ±‚è½¬åŒ–ä¸ºå¯æ“ä½œçš„ç”µå­è¡¨æ ¼æ–¹æ¡ˆã€‚`,
                        task: `è¯·è®¾è®¡ä¸€ä¸ªæ»¡è¶³ä»¥ä¸‹éœ€æ±‚çš„è¡¨æ ¼å·¥å…·ï¼š${idea}`,
                        context: `ä½¿ç”¨åœºæ™¯ï¼š${answerMap.scenario || 'æ—¥å¸¸åŠå…¬'}ï¼›ç›®æ ‡ç”¨æˆ·ï¼š${answerMap.user || 'ä¸ªäºº'}ï¼›åŠŸèƒ½éœ€æ±‚ï¼š${answerMap.features || 'åŸºç¡€åŠŸèƒ½'}ï¼›å¤æ‚åº¦åå¥½ï¼š${answerMap.complexity || 'å¹³è¡¡'}`,
                        constraints: `1. æä¾›å®Œæ•´çš„å…¬å¼å’Œè®¾ç½®æ­¥éª¤ï¼›2. è€ƒè™‘æ•°æ®éªŒè¯å’Œé”™è¯¯å¤„ç†ï¼›3. ç•Œé¢ç›´è§‚æ˜“æ‡‚ï¼›4. è¯´æ˜å¦‚ä½•ç»´æŠ¤å’Œæ‰©å±•`,
                        output: `åˆ†æ­¥éª¤è¯´æ˜ï¼šâ‘ è¡¨æ ¼ç»“æ„è®¾è®¡ â‘¡å…³é”®å…¬å¼è¯¦è§£ â‘¢ä½¿ç”¨è¯´æ˜ â‘£æ‰©å±•å»ºè®®`
                    },
                    analysis: {
                        role: `ä½ æ˜¯ä¸€ä½æ•°æ®åˆ†æå¸ˆï¼Œæ“…é•¿ä»ä¸šåŠ¡è§’åº¦è§£è¯»æ•°æ®ï¼Œå‘ç°å¯è¡ŒåŠ¨çš„æ´å¯Ÿã€‚`,
                        task: `è¯·é’ˆå¯¹ä»¥ä¸‹æ•°æ®è¿›è¡Œåˆ†æï¼š${idea}`,
                        context: `æ•°æ®æ¥æºï¼š${answerMap.dataSource || 'æœªè¯´æ˜'}ï¼›åˆ†æç›®çš„ï¼š${answerMap.purpose || 'å…¨é¢åˆ†æ'}ï¼›æ±‡æŠ¥å¯¹è±¡ï¼š${answerMap.audience || 'è‡ªå·±'}ï¼›è¾“å‡ºå½¢å¼ï¼š${answerMap.output || 'å…³é”®æ´å¯Ÿ'}`,
                        constraints: `1. å…ˆè¯´æ˜åˆ†ææ¡†æ¶å’Œæ–¹æ³•è®ºï¼›2. åŒºåˆ†äº‹å®æè¿°å’Œæ¨æ–­å»ºè®®ï¼›3. æ ‡æ³¨æ•°æ®å±€é™æ€§å’Œç½®ä¿¡åº¦ï¼›4. æä¾›å¯æ‰§è¡Œçš„ä¸‹ä¸€æ­¥è¡ŒåŠ¨`,
                        output: `ç»“æ„åŒ–æŠ¥å‘Šï¼šâ‘ åˆ†ææ¡†æ¶ â‘¡å…³é”®å‘ç°ï¼ˆé™„æ•°æ®æ”¯æ’‘ï¼‰ â‘¢ä¸šåŠ¡æ´å¯Ÿ â‘£è¡ŒåŠ¨å»ºè®® â‘¤æ‰€éœ€è¡¥å……æ•°æ®`
                    },
                    advisory: {
                        role: `ä½ æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„èŒä¸šé¡¾é—®ï¼Œæ“…é•¿åœ¨ä¿¡æ¯ä¸å®Œå…¨çš„æƒ…å†µä¸‹æä¾›ç»“æ„åŒ–æ€è€ƒæ¡†æ¶ã€‚`,
                        task: `è¯·é’ˆå¯¹ä»¥ä¸‹æƒ…å†µæä¾›å»ºè®®ï¼š${idea}`,
                        context: `èƒŒæ™¯æƒ…å†µï¼š${answerMap.background || 'è§åŸå§‹æè¿°'}ï¼›çº¦æŸæ¡ä»¶ï¼š${answerMap.constraints || 'æš‚æ— '}ï¼›åå¥½æ–¹å‘ï¼š${answerMap.preference || 'å¼€æ”¾'}ï¼›è¯¦ç»†ç¨‹åº¦ï¼š${answerMap.detail || 'å¹³è¡¡'}`,
                        constraints: `1. æä¾›å¤šç»´åº¦åˆ†ææ¡†æ¶ï¼›2. æ¯ä¸ªå»ºè®®è¯´æ˜é€‚ç”¨æ¡ä»¶å’Œé£é™©ï¼›3.