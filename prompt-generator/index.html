<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PromptCraft Pro - AIæç¤ºè¯ç”Ÿæˆå™¨</title>
    <style>
        /* ===== CSS Variables & Design Tokens ===== */
        :root {
            /* Colors */
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --primary-light: #818cf8;
            --secondary: #8b5cf6;
            --accent: #06b6d4;
            --accent-light: #22d3ee;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --info: #3b82f6;
            
            /* Backgrounds */
            --bg-dark: #0f172a;
            --bg-darker: #020617;
            --bg-card: #1e293b;
            --bg-card-hover: #263449;
            --bg-input: #334155;
            --bg-input-focus: #3d4f66;
            
            /* Text */
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            
            /* Borders */
            --border: #475569;
            --border-light: #334155;
            
            /* Spacing */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 16px;
            --space-lg: 24px;
            --space-xl: 32px;
            --space-2xl: 48px;
            
            /* Typography */
            --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            
            /* Shadows */
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.3);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.4);
            --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.5);
            --shadow-glow: 0 0 20px rgba(99,102,241,0.3);
            
            /* Transitions */
            --transition-fast: 0.15s ease;
            --transition-base: 0.25s ease;
        }

        /* ===== Reset & Base ===== */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            font-size: 16px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: var(--font-sans);
            background: var(--bg-darker);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* ===== Layout ===== */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--space-lg);
        }

        /* ===== Header ===== */
        .header {
            text-align: center;
            padding: var(--space-2xl) 0;
            position: relative;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 600px;
            height: 400px;
            background: radial-gradient(ellipse, rgba(99,102,241,0.15) 0%, transparent 70%);
            pointer-events: none;
        }

        .logo {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: var(--space-sm);
            position: relative;
        }

        .tagline {
            color: var(--text-secondary);
            font-size: 1.125rem;
            max-width: 600px;
            margin: 0 auto;
        }

        /* ===== Main Content ===== */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-xl);
            margin-bottom: var(--space-2xl);
        }

        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ===== Cards ===== */
        .card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: var(--space-xl);
            border: 1px solid var(--border-light);
            transition: all var(--transition-base);
        }

        .card:hover {
            border-color: var(--border);
            box-shadow: var(--shadow-lg);
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: var(--space-lg);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .card-title-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
        }

        /* ===== Form Elements ===== */
        .form-group {
            margin-bottom: var(--space-lg);
        }

        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: var(--space-sm);
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: var(--space-md);
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 0.9375rem;
            transition: all var(--transition-fast);
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--primary);
            background: var(--bg-input-focus);
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }

        /* ===== Buttons ===== */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            padding: var(--space-md) var(--space-xl);
            border-radius: 10px;
            font-size: 0.9375rem;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-fast);
            border: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            box-shadow: var(--shadow-glow);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(99,102,241,0.4);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: var(--bg-input);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--bg-input-focus);
            border-color: var(--primary-light);
        }

        .btn-sm {
            padding: var(--space-sm) var(--space-md);
            font-size: 0.875rem;
        }

        /* ===== Output Area ===== */
        .output-area {
            background: var(--bg-darker);
            border-radius: 12px;
            padding: var(--space-lg);
            min-height: 200px;
            border: 1px dashed var(--border);
            position: relative;
        }

        .output-content {
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 0.875rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
        }

        .output-content:not(:empty) {
            color: var(--text-primary);
        }

        .output-actions {
            display: flex;
            gap: var(--space-sm);
            margin-top: var(--space-md);
        }

        /* ===== Feedback Section ===== */
        .feedback-section {
            margin-top: var(--space-2xl);
        }

        .feedback-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-xl);
        }

        @media (max-width: 768px) {
            .feedback-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Star Rating */
        .star-rating {
            display: flex;
            gap: var(--space-sm);
            margin-bottom: var(--space-md);
        }

        .star {
            width: 32px;
            height: 32px;
            cursor: pointer;
            transition: all var(--transition-fast);
            fill: var(--bg-input);
        }

        .star:hover,
        .star.active {
            fill: var(--warning);
            transform: scale(1.1);
        }

        .star.active {
            filter: drop-shadow(0 0 8px rgba(245,158,11,0.5));
        }

        /* Rating Summary */
        .rating-summary {
            display: flex;
            align-items: center;
            gap: var(--space-lg);
            padding: var(--space-lg);
            background: var(--bg-darker);
            border-radius: 12px;
            margin-bottom: var(--space-lg);
        }

        .rating-average {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--warning) 0%, #fbbf24 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .rating-details {
            flex: 1;
        }

        .rating-count {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .rating-bar {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            margin-top: var(--space-xs);
        }

        .rating-bar-track {
            flex: 1;
            height: 6px;
            background: var(--bg-input);
            border-radius: 3px;
            overflow: hidden;
        }

        .rating-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--warning) 0%, #fbbf24 100%);
            border-radius: 3px;
            transition: width var(--transition-base);
        }

        /* Feedback History */
        .feedback-list {
            max-height: 400px;
            overflow-y: auto;
            padding-right: var(--space-sm);
        }

        .feedback-list::-webkit-scrollbar {
            width: 6px;
        }

        .feedback-list::-webkit-scrollbar-track {
            background: var(--bg-input);
            border-radius: 3px;
        }

        .feedback-list::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 3px;
        }

        .feedback-item {
            padding: var(--space-md);
            background: var(--bg-darker);
            border-radius: 10px;
            margin-bottom: var(--space-md);
            border: 1px solid var(--border-light);
            transition: all var(--transition-fast);
        }

        .feedback-item:hover {
            border-color: var(--border);
        }

        .feedback-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-sm);
        }

        .feedback-stars {
            display: flex;
            gap: 2px;
        }

        .feedback-star {
            width: 14px;
            height: 14px;
            fill: var(--warning);
        }

        .feedback-star.empty {
            fill: var(--bg-input);
        }

        .feedback-date {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .feedback-comment {
            color: var(--text-secondary);
            font-size: 0.875rem;
            line-height: 1.6;
        }

        .feedback-empty {
            text-align: center;
            padding: var(--space-2xl);
            color: var(--text-muted);
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: var(--space-xl);
            right: var(--space-xl);
            padding: var(--space-md) var(--space-xl);
            background: var(--bg-card);
            border: 1px solid var(--success);
            border-radius: 10px;
            color: var(--success);
            font-weight: 500;
            transform: translateX(150%);
            transition: transform var(--transition-base);
            z-index: 1000;
            box-shadow: var(--shadow-lg);
        }

        .toast.show {
            transform: translateX(0);
        }

        /* Utility Classes */
        .text-center { text-align: center; }
        .mt-md { margin-top: var(--space-md); }
        .mb-md { margin-bottom: var(--space-md); }
        .hidden { display: none; }

        /* Animations */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .loading {
            animation: pulse 1.5s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 class="logo">PromptCraft Pro</h1>
            <p class="tagline">æ™ºèƒ½AIæç¤ºè¯ç”Ÿæˆå™¨ â€” é‡Šæ”¾ä½ çš„åˆ›é€ åŠ›ï¼Œè®©AIæ›´æ‡‚ä½ çš„éœ€æ±‚</p>
        </header>

        <!-- Main Content -->
        <div class="main-grid">
            <!-- Input Card -->
            <div class="card">
                <h2 class="card-title">
                    <span class="card-title-icon">âœ¨</span>
                    åˆ›å»ºæç¤ºè¯
                </h2>
                
                <div class="form-group">
                    <label class="form-label">ä»»åŠ¡ç±»å‹</label>
                    <select class="form-select" id="taskType">
                        <option value="writing">å†…å®¹åˆ›ä½œ</option>
                        <option value="coding">ç¼–ç¨‹å¼€å‘</option>
                        <option value="analysis">æ•°æ®åˆ†æ</option>
                        <option value="design">è®¾è®¡åˆ›æ„</option>
                        <option value="translation">ç¿»è¯‘æ¶¦è‰²</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">ç›®æ ‡æè¿°</label>
                    <textarea class="form-textarea" id="goalInput" placeholder="æè¿°ä½ æƒ³è¦AIå®Œæˆçš„ä»»åŠ¡..."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">çº¦æŸæ¡ä»¶ï¼ˆå¯é€‰ï¼‰</label>
                    <input type="text" class="form-input" id="constraintsInput" placeholder="ä¾‹å¦‚ï¼šå­—æ•°é™åˆ¶ã€æ ¼å¼è¦æ±‚ã€è¯­æ°”é£æ ¼ç­‰">
                </div>

                <button class="btn btn-primary" id="generateBtn" onclick="generatePrompt()">
                    <span>ğŸš€</span>
                    ç”Ÿæˆæç¤ºè¯
                </button>
            </div>

            <!-- Output Card -->
            <div class="card">
                <h2 class="card-title">
                    <span class="card-title-icon" style="background: linear-gradient(135deg, var(--accent) 0%, var(--success) 100%);">ğŸ“</span>
                    ç”Ÿæˆç»“æœ
                </h2>
                
                <div class="output-area">
                    <div class="output-content" id="outputArea">
                        ç‚¹å‡»"ç”Ÿæˆæç¤ºè¯"æŒ‰é’®ï¼ŒAIå°†ä¸ºæ‚¨åˆ›å»ºä¸“ä¸šçš„æç¤ºè¯...
                    </div>
                </div>

                <div class="output-actions">
                    <button class="btn btn-secondary btn-sm" onclick="copyOutput()">
                        <span>ğŸ“‹</span> å¤åˆ¶
                    </button>
                    <button class="btn btn-secondary btn-sm" onclick="clearOutput()">
                        <span>ğŸ—‘ï¸</span> æ¸…ç©º
                    </button>
                </div>
            </div>
        </div>

        <!-- Feedback Section -->
        <section class="feedback-section">
            <h2 class="card-title" style="justify-content: center; margin-bottom: var(--space-xl);">
                <span class="card-title-icon" style="background: linear-gradient(135deg, var(--warning) 0%, #fbbf24 100%);">ğŸ’¬</span>
                ç”¨æˆ·åé¦ˆ
            </h2>

            <div class="feedback-grid">
                <!-- Feedback Form -->
                <div class="card">
                    <h3 class="card-title" style="font-size: 1.125rem;">
                        <span style="font-size: 1.25rem;">â­</span>
                        è¯„ä»·ä½“éªŒ
                    </h3>

                    <!-- Rating Summary -->
                    <div class="rating-summary">
                        <div class="rating-average" id="averageRating">0.0</div>
                        <div class="rating-details">
                            <div class="star-rating" style="margin-bottom: var(--space-xs);">
                                <svg class="star active" style="width: 20px; height: 20px;" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                                <svg class="star active" style="width: 20px; height: 20px;" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                                <svg class="star active" style="width: 20px; height: 20px;" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                                <svg class="star active" style="width: 20px; height: 20px;" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                                <svg class="star active" style="width: 20px; height: 20px;" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                            </div>
                            <div class="rating-count" id="totalReviews">å…± 0 æ¡è¯„ä»·</div>
                        </div>
                    </div>

                    <!-- Rating Distribution -->
                    <div id="ratingDistribution">
                        <div class="rating-bar">
                            <span style="font-size: 0.75rem; color: var(--text-muted); width: 20px;">5â˜…</span>
                            <div class="rating-bar-track"><div class="rating-bar-fill" id="bar5" style="width: 0%"></div></div>
                        </div>
                        <div class="rating-bar">
                            <span style="font-size: 0.75rem; color: var(--text-muted); width: 20px;">4â˜…</span>
                            <div class="rating-bar-track"><div class="rating-bar-fill" id="bar4" style="width: 0%"></div></div>
                        </div>
                        <div class="rating-bar">
                            <span style="font-size: 0.75rem; color: var(--text-muted); width: 20px;">3â˜…</span>
                            <div class="rating-bar-track"><div class="rating-bar-fill" id="bar3" style="width: 0%"></div></div>
                        </div>
                        <div class="rating-bar">
                            <span style="font-size: 0.75rem; color: var(--text-muted); width: 20px;">2â˜…</span>
                            <div class="rating-bar-track"><div class="rating-bar-fill" id="bar2" style="width: 0%"></div></div>
                        </div>
                        <div class="rating-bar">
                            <span style="font-size: 0.75rem; color: var(--text-muted); width: 20px;">1â˜…</span>
                            <div class="rating-bar-track"><div class="rating-bar-fill" id="bar1" style="width: 0%"></div></div>
                        </div>
                    </div>

                    <hr style="border: none; border-top: 1px solid var(--border-light); margin: var(--space-lg) 0;">

                    <!-- Feedback Form -->
                    <form id="feedbackForm" onsubmit="submitFeedback(event)">
                        <div class="form-group">
                            <label class="form-label">æ‚¨çš„è¯„åˆ†</label>
                            <div class="star-rating" id="starRating">
                                <svg class="star" data-value="1" viewBox="0 0 24 24" onclick="setRating(1)" onmouseenter="hoverRating(1)" onmouseleave="resetHover()"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                                <svg class="star" data-value="2" viewBox="0 0 24 24" onclick="setRating(2)" onmouseenter="hoverRating(2)" onmouseleave="resetHover()"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                                <svg class="star" data-value="3" viewBox="0 0 24 24" onclick="setRating(3)" onmouseenter="hoverRating(3)" onmouseleave="resetHover()"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                                <svg class="star" data-value="4" viewBox="0 0 24 24" onclick="setRating(4)" onmouseenter="hoverRating(4)" onmouseleave="resetHover()"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                                <svg class="star" data-value="5" viewBox="0 0 24 24" onclick="setRating(5)" onmouseenter="hoverRating(5)" onmouseleave="resetHover()"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                            </div>
                            <input type="hidden" id="ratingValue" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">æ‚¨çš„è¯„è®º</label>
                            <textarea class="form-textarea" id="commentInput" placeholder="åˆ†äº«æ‚¨çš„ä½¿ç”¨ä½“éªŒï¼Œå¸®åŠ©æˆ‘ä»¬æ”¹è¿›äº§å“..." required></textarea>
                        </div>

                        <button type="submit" class="btn btn-primary" style="width: 100%;">
                            <span>ğŸ“¤</span>
                            æäº¤åé¦ˆ
                        </button>
                    </form>
                </div>

                <!-- Feedback History -->
                <div class="card">
                    <h3 class="card-title" style="font-size: 1.125rem;">
                        <span style="font-size: 1.25rem;">ğŸ“œ</span>
                        åé¦ˆå†å²
                    </h3>
                    
                    <div class="feedback-list" id="feedbackList">
                        <div class="feedback-empty">
                            <div style="font-size: 3rem; margin-bottom: var(--space-md);">ğŸ“</div>
                            <p>æš‚æ— åé¦ˆè®°å½•</p>
                            <p style="font-size: 0.875rem; margin-top: var(--space-sm);">æˆä¸ºç¬¬ä¸€ä¸ªè¯„ä»·çš„ç”¨æˆ·å§ï¼</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">âœ“ æ“ä½œæˆåŠŸ</div>

    <script>
        // ===== Feedback System =====
        let currentRating = 0;
        let feedbacks = [];

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadFeedbacks();
            renderFeedbacks();
            updateRatingSummary();
        });

        // Load from localStorage
        function loadFeedbacks() {
            const stored = localStorage.getItem('promptcraft_feedbacks');
            if (stored) {
                feedbacks = JSON.parse(stored);
            }
        }

        // Save to localStorage
        function saveFeedbacks() {
            localStorage.setItem('promptcraft_feedbacks', JSON.stringify(feedbacks));
        }

        // Star Rating Functions
        function setRating(value) {
            currentRating = value;
            document.getElementById('ratingValue').value = value;
            updateStarDisplay(value);
        }

        function hoverRating(value) {
            updateStarDisplay(value, true);
        }

        function resetHover() {
            updateStarDisplay(currentRating);
        }

        function updateStarDisplay(value, isHover = false) {
            const stars = document.querySelectorAll('#starRating .star');
            stars.forEach((star, index) => {
                if (index < value) {
                    star.classList.add('active');
                    if (isHover) {
                        star.style.opacity = '0.8';
                    } else {
                        star.style.opacity = '1';
                    }
                } else {
                    star.classList.remove('active');
                    star.style.opacity = '1';
                }
            });
        }

        // Submit Feedback
        function submitFeedback(event) {
            event.preventDefault();
            
            const rating = parseInt(document.getElementById('ratingValue').value);
            const comment = document.getElementById('commentInput').value.trim();
            
            if (!rating) {
                showToast('è¯·é€‰æ‹©è¯„åˆ†æ˜Ÿçº§', 'error');
                return;
            }
            
            const feedback = {
                id: Date.now(),
                rating: rating,
                comment: comment,
                date: new Date().toISOString()
            };
            
            feedbacks.unshift(feedback);
            saveFeedbacks();
            renderFeedbacks();
            updateRatingSummary();
            
            // Reset form
            document.getElementById('feedbackForm').reset();
            setRating(0);
            
            showToast('æ„Ÿè°¢æ‚¨çš„åé¦ˆï¼');
        }

        // Render Feedback List
        function renderFeedbacks() {
            const list = document.getElementById('feedbackList');
            
            if (feedbacks.length === 0) {
                list.innerHTML = `
                    <div class="feedback-empty">
                        <div style="font-size: 3rem; margin-bottom: var(--space-md);">ğŸ“</div>
                        <p>æš‚æ— åé¦ˆè®°å½•</p>
                        <p style="font-size: 0.875rem; margin-top: var(--space-sm);">æˆä¸ºç¬¬ä¸€ä¸ªè¯„ä»·çš„ç”¨æˆ·å§ï¼</p>
                    </div>
                `;
                return;
            }
            
            list.innerHTML = feedbacks.map(fb => `
                <div class="feedback-item">
                    <div class="feedback-header">
                        <div class="feedback-stars">
                            ${Array(5).fill(0).map((_, i) => `
                                <svg class="feedback-star ${i < fb.rating ? '' : 'empty'}" viewBox="0 0 24 24">
                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                </svg>
                            `).join('')}
                        </div>
                        <span class="feedback-date">${formatDate(fb.date)}</span>
                    </div>
                    <p class="feedback-comment">${escapeHtml(fb.comment)}</p>
                </div>
            `).join('');
        }

        // Update Rating Summary
        function updateRatingSummary() {
            const total = feedbacks.length;
            if (total === 0) {
                document.getElementById('averageRating').textContent = '0.0';
                document.getElementById('totalReviews').textContent = 'å…± 0 æ¡è¯„ä»·';
                for (let i = 1; i <= 5; i++) {
                    document.getElementById(`bar${i}`).style.width = '0%';
                }
                return;
            }
            
            const sum = feedbacks.reduce((acc, fb) => acc + fb.rating, 0);
            const average = (sum / total).toFixed(1);
            
            document.getElementById('averageRating').textContent = average;
            document.getElementById('totalReviews').textContent = `å…± ${total} æ¡è¯„ä»·`;
            
            // Update distribution bars
            const distribution = {1: 0, 2: 0, 3: 0, 4: 0, 5: 0};
            feedbacks.forEach(fb => distribution[fb.rating]++);
            
            for (let i = 1; i <= 5; i++) {
                const percentage = (distribution[i] / total * 100).toFixed(1);
                document.getElementById(`bar${i}`).style.width = `${percentage}%`;
            }
        }

        // Utility Functions
        function formatDate(isoString) {
            const date = new Date(isoString);
            const now = new Date();
            const diff = now - date;
            
            const minutes = Math.floor(diff / 60000);
            const hours = Math.floor(diff / 3600000);
            const days = Math.floor(diff / 86400000);
            
            if (minutes < 1) return 'åˆšåˆš';
            if (minutes < 60) return `${minutes}åˆ†é’Ÿå‰`;
            if (hours < 24) return `${hours}å°æ—¶å‰`;
            if (days < 7) return `${days}å¤©å‰`;
            
            return date.toLocaleDateString('zh-CN');
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = type === 'success' ? `âœ“ ${message}` : `âœ— ${message}`;
            toast.style.borderColor = type === 'success' ? 'var(--success)' : 'var(--error)';
            toast.style.color = type === 'success' ? 'var(--success)' : 'var(--error)';
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // ===== Prompt Generator Functions =====
        function generatePrompt() {
            const taskType = document.getElementById('taskType').value;
            const goal = document.getElementById('goalInput').value.trim();
            const constraints = document.getElementById('constraintsInput').value.trim();
            
            if (!goal) {
                showToast('è¯·è¾“å…¥ç›®æ ‡æè¿°', 'error');
                return;
            }
            
            const outputArea = document.getElementById('outputArea');
            outputArea.classList.add('loading');
            
            // Simulate generation
            setTimeout(() => {
                const prompt = generatePromptText(taskType, goal, constraints);
                outputArea.textContent = prompt;
                outputArea.classList.remove('loading');
                showToast('æç¤ºè¯ç”ŸæˆæˆåŠŸï¼');
            }, 800);
        }

        function generatePromptText(type, goal, constraints) {
            const templates = {
                writing: `ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„å†…å®¹åˆ›ä½œè€…ã€‚è¯·æ ¹æ®ä»¥ä¸‹è¦æ±‚åˆ›ä½œå†…å®¹ï¼š\n\nã€ç›®æ ‡ã€‘${goal}\n${constraints ? `ã€çº¦æŸæ¡ä»¶ã€‘${constraints}\n` : ''}\nè¦æ±‚ï¼š\n1. å†…å®¹ç»“æ„æ¸…æ™°ï¼Œé€»è¾‘ä¸¥è°¨\n2. è¯­è¨€æµç•…è‡ªç„¶ï¼Œç¬¦åˆç›®æ ‡å—ä¼—\n3. æä¾›æœ‰æ·±åº¦çš„è§è§£å’Œè§‚ç‚¹\n4. é€‚å½“ä½¿ç”¨ä¿®è¾æ‰‹æ³•å¢å¼ºè¡¨ç°åŠ›`,
                
                coding: `ä½ æ˜¯ä¸€ä½èµ„æ·±è½¯ä»¶å·¥ç¨‹å¸ˆã€‚è¯·å®Œæˆä»¥ä¸‹ç¼–ç¨‹ä»»åŠ¡ï¼š\n\nã€ä»»åŠ¡æè¿°ã€‘${goal}\n${constraints ? `ã€æŠ€æœ¯è¦æ±‚ã€‘${constraints}\n` : ''}\nè¦æ±‚ï¼š\n1. ç¼–å†™æ¸…æ™°ã€å¯ç»´æŠ¤çš„ä»£ç \n2. æ·»åŠ å¿…è¦çš„æ³¨é‡Šè¯´æ˜\n3. è€ƒè™‘è¾¹ç•Œæƒ…å†µå’Œé”™è¯¯å¤„ç†\n4. æä¾›ä½¿ç”¨ç¤ºä¾‹å’Œæµ‹è¯•ç”¨ä¾‹`,
                
                analysis: `ä½ æ˜¯ä¸€ä½æ•°æ®åˆ†æå¸ˆã€‚è¯·å¯¹ä»¥ä¸‹æ•°æ®è¿›è¡Œä¸“ä¸šåˆ†æï¼š\n\nã€åˆ†æç›®æ ‡ã€‘${goal}\n${constraints ? `ã€åˆ†æè¦æ±‚ã€‘${constraints}\n` : ''}\nè¦æ±‚ï¼š\n1. é‡‡ç”¨åˆé€‚çš„åˆ†ææ–¹æ³•å’Œæ¨¡å‹\n2. æ•°æ®å¯è§†åŒ–å»ºè®®\n3. æä¾›å¯æ“ä½œçš„æ´å¯Ÿå’Œå»ºè®®\n4. è¯´æ˜åˆ†æçš„å±€é™æ€§å’Œå‡è®¾`,
                
                design: `ä½ æ˜¯ä¸€ä½åˆ›æ„è®¾è®¡å¸ˆã€‚è¯·ä¸ºä»¥ä¸‹éœ€æ±‚æä¾›è®¾è®¡æ–¹æ¡ˆï¼š\n\nã€è®¾è®¡ç›®æ ‡ã€‘${goal}\n${constraints ? `ã€è®¾è®¡çº¦æŸã€‘${constraints}\n` : ''}\nè¦æ±‚ï¼š\n1. æä¾›å¤šä¸ªåˆ›æ„æ–¹å‘\n2. è¯¦ç»†æè¿°è§†è§‰å…ƒç´ å’Œé£æ ¼\n3. è¯´æ˜è®¾è®¡ç†å¿µå’Œç”¨æˆ·ä»·å€¼\n4. ç»™å‡ºå®ç°å»ºè®®å’Œå·¥å…·æ¨è`,
                
                translation: `ä½ æ˜¯ä¸€ä½ä¸“ä¸šç¿»è¯‘ã€‚è¯·å®Œæˆä»¥ä¸‹ç¿»è¯‘ä»»åŠ¡ï¼š\n\nã€åŸæ–‡ã€‘${goal}\n${constraints ? `ã€ç¿»è¯‘è¦æ±‚ã€‘${constraints}\n` : ''}\nè¦æ±‚ï¼š\n1. å‡†ç¡®ä¼ è¾¾åŸæ–‡å«ä¹‰\n2. ç¬¦åˆç›®æ ‡è¯­è¨€çš„è¡¨è¾¾ä¹ æƒ¯\n3. ä¿æŒåŸæ–‡çš„è¯­æ°”å’Œé£æ ¼\n4. å¯¹ä¸“ä¸šæœ¯è¯­æä¾›è§£é‡Šè¯´æ˜`
            };
            
            return templates[type] || templates.writing;
        }

        function copyOutput() {
